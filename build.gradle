plugins {
    id 'java'
    id 'application'
    id 'groovy'
    id 'com.github.johnrengelman.shadow' version '6.0.0'
    id 'io.freefair.lombok' version '5.0.0'
}

sourceCompatibility = JavaVersion.VERSION_11
targetCompatibility = JavaVersion.VERSION_11

repositories {
    mavenLocal()
    mavenCentral()
}

dependencies {
    implementation project(":proto-doer")
    implementation 'org.slf4j:slf4j-api:1.7.30',
            'ch.qos.logback:logback-classic:1.3.0-alpha5',
            'info.picocli:picocli:4.5.1',
            "io.grpc:grpc-protobuf:1.29.0",
            "io.grpc:grpc-stub:1.29.0",
            'io.grpc:grpc-netty-shaded:1.38.1',
            'io.jaegertracing:jaeger-client:1.6.0',
            'io.opentracing.contrib:opentracing-kafka-client:0.1.15',
            "javax.annotation:javax.annotation-api:1.3.2",
            "com.google.protobuf:protobuf-java:3.11.4",
            "com.google.protobuf:protobuf-java-util:3.11.4",
            "org.apache.commons:commons-text:1.9",
            "org.apache.kafka:kafka-clients:2.4.0",
            "com.fasterxml.jackson.core:jackson-core:2.11.2",
            "com.fasterxml.jackson.core:jackson-databind:2.11.2",
            "com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.11.2",
            "com.data-artisans:frocksdbjni:5.17.2-artisans-2.0"


    // Spock : https://github.com/spockframework/spock-example/blob/master/build.gradle
    testImplementation "org.codehaus.groovy:groovy:3.0.8"
    testImplementation platform("org.spockframework:spock-bom:2.0-groovy-3.0")
    testImplementation "org.spockframework:spock-core"
    testImplementation "org.spockframework:spock-junit4"

    testImplementation "org.hamcrest:hamcrest-core:2.2"
    testRuntimeOnly "net.bytebuddy:byte-buddy:1.11.0"
    testRuntimeOnly "org.objenesis:objenesis:3.2"
    testImplementation 'net.bytebuddy:byte-buddy:1.11.5'
}

test {
    useJUnitPlatform()
    testLogging {
        events "passed", "skipped", "failed"
    }
}

application {
    mainClassName = 'io.github.s7i.doer.Doer'
}
